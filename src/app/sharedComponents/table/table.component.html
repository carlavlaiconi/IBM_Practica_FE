<div class="page">
  <div class="box">
    <table mat-table [dataSource]="dataSource">
      <!-- Columns -->
      <ng-container *ngFor="let column of displayedColumns" [matColumnDef]="column">
        <th mat-header-cell *matHeaderCellDef [class.centered-column]="column === 'Attendance' || column === 'Comment' || column === 'Grade' || column === 'Delete'">{{ column }}</th>
        <td mat-cell *matCellDef="let element" [class.centered-column]="column === 'Attendance' || column === 'Comment' || column === 'Grade' || column === 'Delete'">
          <!-- Check if it's the 'Attendance' column -->
          <ng-container *ngIf="column === 'Attendance'; else checkAttendance">
            <ng-container *ngIf="element[column] === 'check'">
              <mat-icon>check</mat-icon>
            </ng-container>
            <ng-container *ngIf="element[column] === 'x'">
              <mat-icon style="color:#bdbdbd">clear</mat-icon>
            </ng-container>
          </ng-container>
          <ng-template #checkAttendance>
            <!-- Check if it's the 'Delete' column -->
          <ng-container *ngIf="column === 'Delete'; else checkDelete">
            <button mat-icon-button *ngIf="element['Delete'] === 'delete'" (click)="onDeleteRow(element)">
              <mat-icon class="deleteIcon">delete</mat-icon>
            </button>
          </ng-container>
          <ng-template #checkDelete>
            <!-- Check if it's the 'Comment' column -->
            <ng-container *ngIf="column === 'Comment'; else regularCell">
              <button mat-icon-button *ngIf="element['Comment'] === 'yes-comment'" (click)="openCommentModal(element)">
                <mat-icon>comment</mat-icon>
              </button>
              <button mat-icon-button *ngIf="element['Comment'] === 'no-comment'" disabled>
                <mat-icon>comment</mat-icon>
              </button>
            </ng-container>
            <ng-template #regularCell>{{ element[column] }}</ng-template>
          </ng-template>
          </ng-template>
        </td>
      </ng-container>

      <!-- Header and Rows -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
</div>
